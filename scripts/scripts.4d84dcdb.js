"use strict";angular.module("dateasyApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","firebase","firebase.utils","simpleLogin"]),angular.module("dateasyApp").controller("MainCtrl",["$scope","fbutil","$timeout","simpleLogin","$location",function(a,b,c,d,e){function f(b){a.err=b,c(function(){a.err=null},5e3)}function g(){e.path("/")}function h(b){a.err=b}a.feedbacks=b.syncArray("feedbacks"),a.feedbacks.$loaded()["catch"](f),a.addFeedback=function(b){a.submitted=!0,b.$valid&&(a.feedbacks.$add(a.feedback)["catch"](f),a.feedback={},a.submitted=!1)},a.oauthLogin=function(b){a.err=null,d.login(b,{rememberMe:!0}).then(g,h)},a.anonymousLogin=function(){a.err=null,d.anonymousLogin({rememberMe:!0}).then(g,h)}}]),angular.module("firebase.config",[]).constant("FBURL","https://dateasy.firebaseio.com").constant("SIMPLE_LOGIN_PROVIDERS",["facebook"]).constant("loginRedirectPath","/login"),angular.module("firebase.utils",["firebase","firebase.config"]).factory("fbutil",["$window","FBURL","$firebase",function(a,b,c){function d(a){for(var b=0;b<a.length;b++)if(angular.isArray(a[b]))a[b]=d(a[b]);else if("string"!=typeof a[b])throw new Error("Argument "+b+" to firebaseRef is not a string: "+a[b]);return a.join("/")}function e(){var c=new a.Firebase(b),e=Array.prototype.slice.call(arguments);return e.length&&(c=c.child(d(e))),c}function f(a,b){var d=e(a);return b=angular.extend({},b),angular.forEach(["limitToFirst","limitToLast","orderByKey","orderByChild","orderByPriority","startAt","endAt"],function(a){if(b.hasOwnProperty(a)){var c=b[a];d=d[a].apply(d,angular.isArray(c)?c:[c]),delete b[a]}}),c(d,b)}return{syncObject:function(){return f.apply(null,arguments).$asObject()},syncArray:function(){return f.apply(null,arguments).$asArray()},ref:e}}]),angular.module("dateasyApp").controller("ChatCtrl",["$scope","fbutil","$timeout",function(a,b,c){function d(b){a.err=b,c(function(){a.err=null},5e3)}a.messages=b.syncArray("messages",{limitToLast:10}),a.messages.$loaded()["catch"](d),a.addMessage=function(b){b&&a.messages.$add({text:b})["catch"](d)}}]),angular.module("dateasyApp").filter("reverse",function(){return function(a){return angular.isArray(a)?a.slice().reverse():[]}}),function(){angular.module("simpleLogin",["firebase","firebase.utils","firebase.config"]).factory("authRequired",["simpleLogin","$q",function(a,b){return function(){return a.auth.$requireAuth().then(function(a){return a?a:b.reject({authRequired:!0})})}}]).factory("simpleLogin",["$firebaseAuth","fbutil","$q","$rootScope",function(a,b){function c(){f.initialized=!0,f.user=d.$getAuth()||null,angular.forEach(e,function(a){a(f.user)})}var d=a(b.ref()),e=[],f={auth:d,user:null,initialized:!1,getUser:function(){return d.$getAuth()},login:function(a,b){return d.$authWithOAuthPopup(a,b)},anonymousLogin:function(a){return d.$authAnonymously(a)},passwordLogin:function(a,b){return d.$authWithPassword(a,b)},logout:function(){d.$unauth()},watch:function(a,b){e.push(a),d.$waitForAuth(a);var c=function(){var b=e.indexOf(a);b>-1&&e.splice(b,1)};return b&&b.$on("$destroy",c),c}};return d.$onAuth(c),f}])}(),angular.module("dateasyApp").controller("LoginCtrl",["$scope","simpleLogin","$location",function(a,b,c){function d(){c.path("/account")}function e(b){a.err=b}a.oauthLogin=function(c){a.err=null,b.login(c,{rememberMe:!0}).then(d,e)},a.anonymousLogin=function(){a.err=null,b.anonymousLogin({rememberMe:!0}).then(d,e)}}]),angular.module("dateasyApp").controller("AccountCtrl",["$scope","user","simpleLogin","fbutil","$timeout",function(a,b,c,d){function e(b){f&&f.$destroy(),f=d.syncObject("users/"+b.uid),f.$bindTo(a,"profile")}a.user=b,a.logout=c.logout,a.messages=[];var f;e(b)}]),angular.module("dateasyApp").directive("ngShowAuth",["simpleLogin","$timeout",function(a,b){var c;return a.watch(function(a){c=!!a}),{restrict:"A",link:function(d,e){function f(){b(function(){e.toggleClass("ng-cloak",!c)},0)}e.addClass("ng-cloak"),a.watch(f,d),a.getUser(f)}}}]),angular.module("dateasyApp").directive("ngHideAuth",["simpleLogin","$timeout",function(a,b){var c;return a.watch(function(a){c=!!a}),{restrict:"A",link:function(d,e){function f(){b(function(){e.toggleClass("ng-cloak",c!==!1)},0)}e.addClass("ng-cloak"),a.watch(f,d),a.getUser(f)}}}]),angular.module("dateasyApp").config(["$routeProvider","SECURED_ROUTES",function(a,b){a.whenAuthenticated=function(c,d){return d.resolve=d.resolve||{},d.resolve.user=["authRequired",function(a){return a()}],a.when(c,d),b[c]=!0,a}}]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/login",{templateUrl:"views/login.html",controller:"LoginCtrl"}).when("/chat",{templateUrl:"views/chat.html",controller:"ChatCtrl"}).whenAuthenticated("/account",{templateUrl:"views/account.html",controller:"AccountCtrl"}).when("/chat",{templateUrl:"views/chat.html",controller:"ChatCtrl"}).otherwise({redirectTo:"/"})}]).run(["$rootScope","$location","simpleLogin","SECURED_ROUTES","loginRedirectPath",function(a,b,c,d,e){function f(a){!a&&g(b.path())&&b.path(e)}function g(a){return d.hasOwnProperty(a)}c.watch(f,a),a.$on("$routeChangeError",function(a,c,d,f){angular.isObject(f)&&f.authRequired&&b.path(e),$window.ga&&$window.ga("send","pageview",{page:b.path()})})}]).constant("SECURED_ROUTES",{}),angular.module("dateasyApp").directive("custom2",function(){return{restrict:"A",link:function(){$(document).ready(function(){function a(){var a=$(window).width()+"px",b=$(window).height()+"px";$("#hero").css({width:a,height:b}),$(window).resize(function(){var a=$(window).width()+"px",b=$(window).height()+"px";$("#hero").css({width:a,height:b})})}a(),(new WOW).init({offset:20}),$(document).on("click.nav",".navbar-collapse.in",function(a){($(a.target).is("a")||$(a.target).is("button"))&&$(this).collapse("hide")}),$("#show-btn").click(function(){return $("#showme").slideDown("slow"),$(this).hide(),!1}),$(".carousel").carousel(),$("#main-nav").singlePageNav({offset:60,speed:750,currentClass:"active",beforeStart:function(){},onComplete:function(){}}),$("#modal-bar").affix({offset:{top:10}});var b=3,c=new Date,d=c.setTime(c.getTime()+24*b*60*60*1e3);$("#countdown").countdown(d,function(a){$(this).text(a.strftime("%-d days %H:%M:%S"))}),$(".smooth-scroll").click(function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var a=$(this.hash);if(a=a.length?a:$("[name="+this.hash.slice(1)+"]"),a.length)return $("html,body").animate({scrollTop:a.offset().top-60},1e3),!1}}),$(".img-box").click(function(a){a.preventDefault();var b=$(this).parent(),c=b.find(".project-title").text(),d=b.find(".project-price").text(),e=b.find(".project-description").html(),f='<div class="slides-container">',g=b.find(".project-description");slides=b.find(".project-description").data("images").split(",");for(var h=0;h<slides.length;++h)f=f+"<img src="+slides[h]+' alt="">';f+='</div><nav class="slides-navigation"><a href="#" class="next"><i class="icon-arrow-right"></i></a><a href="#" class="prev"><i class="icon-arrow-left"></i></a></nav>',$("#project-modal").on("show.bs.modal",function(){$(this).find("#sdbr-title").text(c),$(this).find("#sdbr-price").text(d),$(this).find("#project-content").html(e).append('<a id="btn-order" class="btn btn-store btn-right"  href="#">Order now</a>'),$(this).find(".screen").addClass("slides").html(f),g.data("oldprice")?$(this).find("#sdbr-oldprice").show().text(g.data("oldprice")):$(this).find("#sdbr-oldprice").hide(),g.data("descr")?$(this).find("#sdbr-descr").show().text(g.data("descr")):$(this).find("#sdbr-descr").hide(),setTimeout(function(){$(".slides").superslides({inherit_height_from:".modal-header"}),$("#project-modal .screen").addClass("done").prev(".loader").fadeOut()},1e3)}).modal()}),$("#project-modal").on("hidden.bs.modal",function(){$(this).find(".loader").show(),$(this).find(".screen").removeClass("slides").removeClass("done").html("").superslides("destroy")}),$("#project-modal").on("click","#btn-order",function(){$("#project-modal").modal("hide"),$(this).find(".loader").show(),$(this).find(".screen").removeClass("slides").removeClass("done").html("").superslides("destroy");var a=$("section[id='orderform']");$("html,body").animate({scrollTop:a.offset().top},"slow")})})}}});